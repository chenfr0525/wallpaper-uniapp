{"version":3,"file":"classList.js","sources":["pages/classList/classList.vue","D:/Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NMaXN0L2NsYXNzTGlzdC52dWU"],"sourcesContent":["<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue'\r\n\timport {\r\n\t\tgoToHome\r\n\t} from '@/utils/common.js'\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonReachBottom,\r\n\t\tonUnload\r\n\t} from '@dcloudio/uni-app';\r\n\timport {\r\n\t\tapiclassifyItem\r\n\t} from '../../api/api.js'\r\n\timport {\r\n\t\tonShareAppMessage,\r\n\t\tonShareTimeline\r\n\t} from '@dcloudio/uni-app'\r\n\tconst isLoading = ref(true)\r\n\tconst list = ref([])\r\n\tconst isNoData = ref(false)\r\n\tconst queryparams = ref({\r\n\t\tpageNum: 1,\r\n\t\tpageSize: 12\r\n\t})\r\n\tconst getClassifyItem = async () => {\r\n\t\tlet res = await apiclassifyItem(queryparams.value)\r\n\t\tlist.value.push(...res)\r\n\t\tuni.setStorageSync('theme-classify', list.value)\r\n\t\tisLoading.value = false\r\n\t\tif (queryparams.value.pageSize > res.length) isNoData.value = true\r\n\t}\r\n\tconst title = ref(null)\r\n\tonLoad((options) => {\r\n\t\tif (options.type) queryparams.value.type = options.type\r\n\t\tif (options.classid) queryparams.value.classid = options.classid\r\n\t\ttitle.value = options.title\r\n\t\tuni.setNavigationBarTitle({\r\n\t\t\ttitle: options.title\r\n\t\t})\r\n\t\tgetClassifyItem()\r\n\t})\r\n\t//触底时继续加载\r\n\tonReachBottom(() => {\r\n\t\tif (isNoData.value) return\r\n\t\tqueryparams.value.pageNum++\r\n\t\tgetClassifyItem()\r\n\t})\r\n\t//分享给朋友\r\n\tonShareAppMessage((e) => {\r\n\t\treturn {\r\n\t\t\ttitle: '壁纸分类' + title.value,\r\n\t\t\tpath: `pages/classList/classList?classid=${queryparams.value.classid}&name=${title.value}`\r\n\t\t}\r\n\t})\r\n\t//分享朋友圈\r\n\tonShareTimeline((e) => {\r\n\t\tconsole.log(e)\r\n\t\treturn {\r\n\t\t\ttitle: '壁纸分类' + title.value,\r\n\t\t\tquery: `classid=${queryparams.value.classid}&name=${title.value}`\r\n\t\t}\r\n\t})\r\n\t//退出页面\r\n\tonUnload(() => {\r\n\t\tuni.removeStorageSync('theme-classify')\r\n\t})\r\n</script>\r\n\r\n<template>\r\n\t<view class=\"classList\">\r\n\t\t<load type=\"loading\" v-if=\"isLoading\"></load>\r\n\t\t<view class=\"content\" v-else>\r\n\t\t\t<navigator :url=\"'/pages/preview/preview?id='+item._id\" class=\"item\" v-for=\"item in list\" :key=\"item._id\">\r\n\t\t\t\t<image :src=\"item.smallPicurl\" mode=\"aspectFill\"></image>\r\n\t\t\t</navigator>\r\n\r\n\t\t</view>\r\n\t\t<load type=\"noMore\" v-if=\"isNoData\"></load>\r\n\t\t<view class=\"safe-area-inset-bottom\"></view>\r\n\t</view>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.classList {\r\n\t\t.content {\r\n\t\t\tdisplay: grid;\r\n\t\t\tpadding: 0 15rpx;\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t\tgap: 15rpx;\r\n\r\n\t\t\t.item {\r\n\t\t\t\theight: 400rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/23212/Desktop/practiceCode/wallpaper-uniapp/pages/classList/classList.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","apiclassifyItem","uni","onLoad","onReachBottom","onShareAppMessage","onShareTimeline","onUnload"],"mappings":";;;;;;;;;;;;;;AACA,UAAA,YAAAA,cAAA,IAAA,IAAA;AAmBA,UAAA,OAAAA,cAAA,IAAA,EAAA;AACA,UAAA,WAAAA,cAAA,IAAA,KAAA;AACA,UAAA,cAAAA,cAAAA,IAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAA;AAAA,IACA,CAAA;AACA,UAAA,kBAAA,YAAA;AACA,UAAA,MAAA,MAAAC,wBAAA,YAAA,KAAA;AACA,WAAA,MAAA,KAAA,GAAA,GAAA;AACAC,oBAAAA,MAAA,eAAA,kBAAA,KAAA,KAAA;AACA,gBAAA,QAAA;AACA,UAAA,YAAA,MAAA,WAAA,IAAA;AAAA,iBAAA,QAAA;AAAA,IACA;AACA,UAAA,QAAAF,cAAA,IAAA,IAAA;AACAG,kBAAA,OAAA,CAAA,YAAA;AACA,UAAA,QAAA;AAAA,oBAAA,MAAA,OAAA,QAAA;AACA,UAAA,QAAA;AAAA,oBAAA,MAAA,UAAA,QAAA;AACA,YAAA,QAAA,QAAA;AACAD,oBAAAA,MAAA,sBAAA;AAAA,QACA,OAAA,QAAA;AAAA,MACA,CAAA;AACA,sBAAA;AAAA,IACA,CAAA;AAEAE,kBAAAA,cAAA,MAAA;AACA,UAAA,SAAA;AAAA;AACA,kBAAA,MAAA;AACA,sBAAA;AAAA,IACA,CAAA;AAEAC,kBAAA,kBAAA,CAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA,SAAA,MAAA;AAAA,QACA,MAAA,qCAAA,YAAA,MAAA,OAAA,SAAA,MAAA,KAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEAC,kBAAA,gBAAA,CAAA,MAAA;AACAJ,oBAAAA,MAAA,MAAA,OAAA,uCAAA,CAAA;AACA,aAAA;AAAA,QACA,OAAA,SAAA,MAAA;AAAA,QACA,OAAA,WAAA,YAAA,MAAA,OAAA,SAAA,MAAA,KAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEAK,kBAAAA,SAAA,MAAA;AACAL,oBAAA,MAAA,kBAAA,gBAAA;AAAA,IACA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClEA,GAAG,WAAW,eAAe;"}